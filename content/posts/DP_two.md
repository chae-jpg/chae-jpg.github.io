---
date: '2024-04-17'
draft: false
title: 'DP ë¬¸ì œ ë‘ ê°œ'
tags: ['PS']
summary: DP ë¬¸ì œ 2ë¬¸ì œë¥¼ í’€ì—ˆìŠµë‹ˆë‹¤.
math: true
---
ì´ë… ê³¼ì œë¡œ í‘¼ ë‘ ë¬¸ì œ

## ê·¸ë…€ë¥¼ ì°¾ì•„ì„œ

DPë³´ë‹¤ëŠ” í™•í†µ ë¬¸ì œ ì•„ë‹Œê°€...? ë¼ëŠ” ìƒê°ì´ ê°€ì¥ ë¨¼ì € ë“¤ì—ˆë‹¤

ì´ë ‡ê²Œ ìƒê°í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŒ

ë¨¼ì € ì´ˆê¸°ì— ê° ë…¸ë“œë¡œ ë“¤ì–´ê°€ëŠ” í™•ë¥ ì€ ëª¨ë‘ ë™ì¼í•˜ë‹ˆê¹Œ ê·¸ ê°’ìœ¼ë¡œ ì •í•´ì¤€ ë‹¤ìŒ 10ë¶„ ê°„ê²©ìœ¼ë¡œ í•œ ì¹¸ì”© ì˜®ê²¨ì£¼ë©´ ë˜ëŠ” ê±°ì„. ê·¼ë° ê·¸ ë•Œ ê³„ì‚°ì„ ìœ„í•´ì„œ ì£¼ì–´ì§„ í™•ë¥ ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ.

ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì˜ˆë¥¼ ê°€ì§€ê³  ìƒê°í•´ë³´ì.
ì´ ê²½ìš°ëŠ” ì •ì ì€ ëª¨ë‘ 4ê°œë‹ˆ ì´ˆê¸° í™•ë¥ ì€ *0.25*ê°€ ëœë‹¤.
(ì¶”ê°€ : ë¬¸ì œ ì œëŒ€ë¡œ ì•ˆ ì½ì—ˆë‹¤ í•­ìƒ ì •ì ì€ 4ê°œë‹¤; ì œë°œ)
ê·¸ë¦¬ê³  ëª¨ë“  ì •ì ì— ëŒ€í•´ì„œ í™•ë¥ ì„ ê³„ì‚°í•´ë³´ì.

| ê³„ì‚°í•œ ë…¸ë“œ |  A   |  B   |   C   |       D        |
| :----: | :--: | :--: | :---: | :------------: |
|   A    |  0   | 0.25 |   0   |       0        |
|   B    |  0   | 0.25 | 0.075 |     0.175      |
|   C    | 0.15 | 0.25 | 0.075 |   0.175+0.1    |
|   D    | 0.15 | 0.25 | 0.075 | 0.175+0.1+0.25 |
ë‹¤ìŒê³¼ ê°™ì´ êµ¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. 

ì´ ë•Œ ì´ˆê¸° í™•ë¥ ì„ ëª¨ë‘ í•©í•œ ê°’ì´ 1ì¸ë°, í•œ ì •ì ì—ì„œ ë‹¤ë¥¸ ì •ì ìœ¼ë¡œ ê°ˆë¼ì§€ëŠ” í™•ë¥ ì˜ í•©ë„ 1ì´ë¯€ë¡œ (x + y + z + ...) x 1 = 1ì´ ëœë‹¤.
í¼ì„¼í‹°ì§€ë¡œ ë¦¬í„´í•˜ë¼ê³  í–ˆìœ¼ë‹ˆ 100ì„ ê³±í•´ì£¼ë©´ ë˜ê³ , ìƒëŒ€ì˜¤ì°¨ê°€ $10^{-2}$ê¹Œì§€ í—ˆë½ë˜ë¯€ë¡œ ì†Œìˆ˜ì ì„ ë‘˜ì§¸ìë¦¬ê¹Œì§€ í‘œì‹œí•´ì£¼ë©´ ì•ˆì „í•  ê²ƒì´ë‹¤.

ê·¸ëŸ¼ ì½”ë“œë¥¼ ì§œë³¼ê¹Œìš”?

```cpp
//ê·¸ë…€ë¥¼ ì°¾ì•„ì„œ - ì‹¤ë²„ 3  
#include <bits/stdc++.h>  
  
using namespace std;  
  
typedef pair<int, double> pid;  
  
int t, m;  
  
vector<vector<pid>> graph;  
  
int main() {  
    cin >> t >> m;  
    graph.assign(4, vector<pid>());  
  
    for (int i = 0; i < m; i++) {  
        char a, b;  
        double c;  
        cin >> a >> b >> c;  
        graph[a-'A'].push_back({b-'A', c});  
    }  
  
    vector<vector<double>> dp(t+1, vector<double> (4, 0));  
  
  
    for (int i = 0; i < 4; i++) {  
        dp[0][i] = (double)1 / 4;  
    }  
  
    // ì‹œê°„ : 1ì—ì„œë¶€í„° tì¼ ë•Œê¹Œì§€ ë°˜ë³µ  
    for (int i = 1; i <= t; i++) {  
        for (int j = 0; j < 4; j++) {  
            int cur = j;  
            for (auto next : graph[cur]) {  
                dp[i][next.first] += dp[i-1][cur] * next.second;  
            }  
        }  
    }  
  
    cout << setprecision(2) << fixed;  
    for (int i = 0; i < 4; i++) {  
        cout << dp[t][i] * 100 << '\n';  
    }  
}
```
ë¬´ë‚œí•˜ê²Œ ë§ìŒ ğŸ‘
`cout << setprecision() << fixed` ì´ê±° ì§„ì§œ ì¢€ ì™¸ì›Œì•¼ê² ìŒ;

## ì¢ì€ ë¯¸ìˆ ì „ì‹œê´€

ë³´ìë§ˆì ìƒê°ë‚œ ë¬¸ì œëŠ” [ì´ê±°](https://www.acmicpc.net/problem/9465)
ê·¼ë° ì´ ë¬¸ì œëŠ” ë–¼ì•¼ í•˜ëŠ” ìŠ¤í‹°ì»¤ì˜ ê°œìˆ˜ê°€ ì •í•´ì ¸ ìˆì§€ ì•Šì•„ì„œ ì´ ë¬¸ì œê°€ ì¡°ê¸ˆ ë” ê¹Œë‹¤ë¡­ë‹¤ê³  í•  ìˆ˜ ìˆìŒã…‡ã…‡ ê³¨ë“œ 5ë©´ ë”± ì ë‹¹í•œ ë“¯

ì¼ë‹¨ ë“  ìƒê°ì€ íƒë‹¤ìš´ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” í¸ì´ í›¨ì”¬ í¸í•  ê²ƒ ê°™ë‹¤ëŠ” ê±°... ì™„ì „íƒìƒ‰í•  ë•Œ ì¬ê·€ë¡œ ë¹ ì ¸ë‚˜ì˜¤ëŠ” íšŸìˆ˜ ì¹´ìš´íŠ¸ í•´ì£¼ëŠ” ê²ƒì²˜ëŸ¼ ì–˜ë„ ê·¸ë ‡ê²Œ í•´ì„œ ë‹«ì•„ì•¼ í•˜ëŠ” ë°© ê°œìˆ˜ê°€ ì°¼ì„ ë•Œ ë‚˜ì˜¤ê²Œ í•˜ëŠ” ê²Œ ì¢‹ì§€ ì•Šì„ê¹Œ ìƒê°í•¨

ì§„ì§œ ìµœì•… ì¼€ì´ìŠ¤ë¥¼ ê°€ì •í•˜ë©´ nì´ 200ì´ê³  kê°€ 100, ê·¸ë¦¬ê³  ë§¤ ì¹¸ì´ ë‹¤ ë–¨ì–´ì ¸ìˆì–´ì„œ ì™¼ìª½ ì˜¤ë¥¸ìª½ì´ 100í¼ ëœë¤ì¸ ì¼€ì´ìŠ¤ë¥¼ ìƒê°í•´ë³¼ ìˆ˜ê°€ ìˆì„ ê²ƒ ê°™ì€ë° ì´ëŸ¼ 200C100 * 2^100ì´ë‹ˆê¹Œ... 2ì˜ 100ìŠ¹ì´ 10ë§Œ ì •ë„ ë˜ê³  ì•ì´ 200!/(100! * 100!)ì´ ë˜ëŠ” ê±´ë° ë³´ë‚˜ë§ˆë‚˜ 20ì–µì´ ë„˜ì–´ê°ˆ ê²ƒì´ ë»”í•˜ê¸° ë•Œë¬¸ì—... ì €ì¥í•˜ë©´ì„œ ê°’ì„ êµ¬í•˜ëŠ” ìˆ˜ ë°–ì— ì—†ë‹¤

ê¹Œì§€ ìƒê°í•˜ê³  ë” ì´ìƒ ìƒê°ì´ ì§„ì „ì´ ì•ˆ ë¼ì„œ ê²°êµ­ êµ¬ê¸€ë§í–ˆë‹¤; ë‹¹ì¥ ë°°ì—´ë¶€í„° ì–´ë–»ê²Œ ì§œëŠ”ì§€ ë– ì˜¤ë¥´ì§€ê°€ ì•Šì•˜ëŠ”ë° ë‹¤ìŒ ë¸”ë¡œê·¸ì˜ ê¸€ì„ ë³´ê³  ë¬´ë¦ì„ íƒ! ì³¤ë‹¤...

[ë§í¬](https://lyzqm.blogspot.com/2017/06/10476.html)

ë‚´ê°€ ê³ ë¯¼í–ˆë˜ ì§€ì ì„ ë‚˜ëˆ„ì–´ì„œ ì„¤ëª…í•´ë³´ìë©´

1. í˜„ì¬ ìƒíƒœë¥¼ ì €ì¥í•´ì•¼ í•˜ëŠ”ë°, ì´ê±¸ ì–´ë–»ê²Œ ì €ì¥í•˜ì§€? ê·¸ëŸ¬ë‹ˆê¹Œ ì§€ê¸ˆ í•œ ì¤„ì— ë°©ì´ ì™¼ìª½ë§Œ ë‹«íˆê±°ë‚˜, ì˜¤ë¥¸ìª½ë§Œ ë‹«íˆê±°ë‚˜, ì•„ë‹˜ ì•„ì˜ˆ ì•ˆ ë‹«íˆê±°ë‚˜ ì´ê±¸ í‘œí˜„ì„ í•´ì•¼ í•˜ëŠ”ë° ì–´ë–»ê²Œ í•˜ì§€...?
	- A : ê·¸ëƒ¥ ìƒíƒœë¥¼ 3ê°œ ë§Œë“¤ë©´ ë˜ëŠ” ì¼ì´ì—ˆìŒ. ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹
	- í•´ë‹¹ ì¤„ì— ëª¨ë“  ë¬¸ì´ ì—´ë ¤ìˆëŠ” ê²ƒë„ ë¶„ëª…íˆ ì¡´ì¬í•˜ëŠ” ì¼€ì´ìŠ¤ë‹ˆê¹Œ,,, ê·¸ë¦¬ê³  ë‹¤ìŒ ì¹¸ì—ì„œ ê³ ë ¤í•  ë•Œë„ ì „ ì¤„ì—ì„œ ëª¨ë“  ë¬¸ì´ ì—´ë ¤ìˆëŠ” ì¼€ì´ìŠ¤ì¸ì§€ê°€ ì¶©ë¶„íˆ ê³ ë ¤ì‚¬í•­ì´ ë˜ê¸° ë•Œë¬¸ì—... 
	- ì´ê±°ë‘ ë¹„ìŠ·í•œ ë¬¸ì œë¡œ [ìŠ¤í‹°ì»¤](https://www.acmicpc.net/problem/9465) ë¬¸ì œê°€ ìˆëŠ”ë° ì—¬ê¸°ì„œëŠ” ë°°ì—´ì„ ë§Œë“¤ ë•Œ ìƒíƒœë¥¼ ì• ì´ˆì— ë¬´ì¡°ê±´ ë¶™ì¸ë‹¤!ë¡œ ë§Œë“¤ì–´ì„œ ê·¸ê±° ë•Œë¬¸ì— ì•„ë¬´ ë¬¸ë„ ë‹«ì§€ ì•ŠëŠ”ë‹¤!ë¼ëŠ” ì„ íƒì§€ê°€ ì¡´ì¬í•  ìˆ˜ ì—†ì„ ê±°ë¼ê³  ìƒê°í–ˆë˜ ê²ƒ ê°™ìŒ... ê·¼ë° ì € ë¬¸ì œëŠ” ë¶™ì´ëŠ” ê°œìˆ˜ì˜ ì œí•œì´ ì—†ì–´ì„œ ë¶™ì¼ ìˆ˜ ìˆë‹¤ë©´ ìµœëŒ€í•œ ë¶™ì´ëŠ” í¸ì´ ì´ë“ì¸ ë¬¸ì œë¼ì„œ ê·¸ë ‡ê²Œ ìƒíƒœë¥¼ ìœ„ ì•„ë˜ ë‘ ê°œë¡œ í•´ë„ ë¬¸ì œê°€ ì—†ì—ˆë˜ ê±°ê³  ì´ ë¬¸ì œëŠ” ê°œìˆ˜ ì œí•œì´ ìˆë‹¤ëŠ” ê²Œ ì°¨ì´ì ì„... ê·¼ë° ìŠ¤í‹°ì»¤ë„ ì§€ê¸ˆ ë‹¤ë¥¸ ì‚¬ëŒë“¤ í‘¼ ê±° ë³´ë‹ˆê¹Œ ìƒíƒœ 3ê°œë¡œ í•´ì„œ í‘¼ ì‚¬ëŒë“¤ë„ ìˆë„¤ ë¨¸ì“±;
2. ë°© ê°œìˆ˜ê°€ ì œí•œë˜ì–´ ìˆëŠ”ë° ì´ê±¸ ë°°ì—´ì— ì–´ë–»ê²Œ ì €ì¥í•˜ì§€?
	- A : ê·¸ëƒ¥ ë°© ê°œìˆ˜ë„ ìƒíƒœë¥¼ ë§Œë“¤ë©´ ë˜ëŠ” ì¼ì´ì—ˆìŒ...
	- ì´ê±¸ ëª…ì‹¬í•´ì•¼ ë  ê²ƒ ê°™ìŒ
	- **dp ë°°ì—´ì—ëŠ” í•´ë‹¹ ë¬¸ì œì—ì„œ ê°€ëŠ¥í•œ ëª¨ë“  ìƒíƒœë¥¼ ì €ì¥í•œë‹¤!!!**
	- ê·¸ë‹ˆê¹Œ ë°© ê°œìˆ˜ë„ ì—„ì—°í•œ ìƒíƒœ ì¤‘ í•˜ë‚˜ê¸° ë•Œë¬¸ì— ì´ê±¸ ì €ì¥í•˜ëŠ” ì¹¼ëŸ¼ì„ í•˜ë‚˜ ë” ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•˜ë©´ ê·¸ë§Œì´ë‹¤ ì´ ë§ì„...

ì´ë ‡ê²Œ í•´ì„œ ì¼ë‹¨ ë°°ì—´ë¡œ ìƒíƒœë¥¼ ì–´ë–»ê²Œ í‘œí˜„í•  ì§€ë¥¼ ìƒê°í•´ë‘ë©´ ì í™”ì‹ì„ ì„¸ìš¸ ìˆ˜ ìˆê³ ? ì í™”ì‹ì„ ì„¸ìš°ë©´ íƒ‘ë‹¤ìš´ì´ë“  ë°”í…€ì—…ì´ë“  ëª¨ë“  ìƒíƒœë¥¼ ê³„ì‚°í•˜ëŠ” ì—°ì‚°ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•  ì§€ë¥¼ ë– ì˜¬ë¦´ ìˆ˜ ìˆìŒ...

ì í™”ì‹ì„ ì„¸ì›Œë³´ìë©´ ë‹¤ìŒê³¼ ê°™ìŒ.
ìƒíƒœëŠ” 0ì´ ì™¼ìª½ ë‹«í˜, 1ì´ ì˜¤ë¥¸ìª½ ë‹«í˜, 2ê°€ ë‹¤ ì—´ë¦¼ì„
ê·¸ë¦¬ê³  ë°°ì—´ì´ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì€ í•´ë‹¹ ìƒíƒœì¼ ë•Œ ê°€ì¹˜ì˜ ìµœëŒ“ê°’.

$$
dp[line][closed\_cnt][state] 
$$
$$
dp[line][closed\_cnt][0] = max(dp[line-1][closed\_cnt-1][0], dp[line-1][closed\_cnt-1][2] + board[line][1])
$$
$$
dp[line][closed\_cnt][1] = max(dp[line-1][closed\_cnt-1][1], dp[line-1][closed\_cnt][2])+board[line][0]
$$
$$
dp[line][closed\_cnt][2] = max(dp[line-1][closed\_cnt-1][0], dp[line-1][closed\_cnt][1], dp[line-1][closed\_cnt][2])+board[line][0]+board[line][1]
$$
ì´ ì í™”ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ì½”ë“œë¥¼ ì§œ ë³´ê² ìŒ.

```cpp
//ì¢ì€ ë¯¸ìˆ ì „ì‹œê´€ - ê³¨ë“œ 5  
#include <bits/stdc++.h>  
  
using namespace std;  
  
int n, k;  
  
vector<vector<int>> board;  
vector<vector<vector<int>>> dp;  
  
int main() {  
    cin >> n >> k;  
    board.assign(n+1, vector<int> (2, 0));  
    dp.assign(n+1, vector<vector<int>> (k+1, vector<int> (3, 0)));  
  
    for (int i = 1; i <= n; i++) {  
        cin >> board[i][0] >> board[i][1];  
    }  
    //0 : ì™¼ìª½ ë‹«, 1 : ì˜¤ë¥¸ìª½ ë‹«, 2 : ë‹¤ ì—´ë¦¼  
    dp[1][1][0] = board[1][1];  
    dp[1][1][1] = board[1][0];  
    dp[1][0][2] = board[1][0] + board[1][1];  
  
    for (int j = 0; j <= k; j++) {  
        for (int i = 2; i <= n; i++) {  
            if (j) {  
                dp[i][j][0] = max(dp[i-1][j-1][0], dp[i-1][j-1][2]) + board[i][0];  
                dp[i][j][1] = max(dp[i-1][j-1][1], dp[i-1][j-1][2]) + board[i][1];  
            }  
            dp[i][j][2] = max({dp[i-1][j][0], dp[i-1][j][1], dp[i-1][j][2]}) + board[i][0] + board[i][1];  
        }  
    }  
  
    cout << max({dp[n][k][0], dp[n][k][1], dp[n][k][2]});  
}
```
ì¼ë‹¨ ì´ë ‡ê²Œ ì§¬
ê·¸ë¦¬ê³  **WA**!

```cpp
//ì¢ì€ ë¯¸ìˆ ì „ì‹œê´€ - ê³¨ë“œ 5  
#include <bits/stdc++.h>  
  
using namespace std;  
  
int n, k;  
  
vector<vector<int>> board;  
vector<vector<vector<int>>> dp;  
  
int main() {  
    cin >> n >> k;  
    board.assign(n+1, vector<int> (2, 0));  
    dp.assign(n+2, vector<vector<int>> (k+2, vector<int> (3, 0)));  
  
    for (int i = 1; i <= n; i++) {  
        cin >> board[i][0] >> board[i][1];  
    }  
    //0 : ì™¼ìª½ ë‹«, 1 : ì˜¤ë¥¸ìª½ ë‹«, 2 : ë‹¤ ì—´ë¦¼  
    dp[1][1][0] = board[1][1];  
    dp[1][1][1] = board[1][0];  
    dp[1][0][2] = board[1][0] + board[1][1];  
  
    for (int j = 0; j <= k; j++) {  
        for (int i = 2; i <= n; i++) {  
            //ë‹«ì€ ë¬¸ì˜ ê°œìˆ˜ê°€ ë¼ì¸ë³´ë‹¤ í´ ë•Œ -> skip            
            if (j > i) continue;  
            if (j) {  
                dp[i][j][0] = max(dp[i-1][j-1][0], dp[i-1][j-1][2]) + board[i][1];  
                dp[i][j][1] = max(dp[i-1][j-1][1], dp[i-1][j-1][2]) + board[i][0];  
            }  
            if (i != j)  
                dp[i][j][2] = max({dp[i-1][j][0], dp[i-1][j][1], dp[i-1][j][2]}) + board[i][0] + board[i][1];  
        }  
    }  
  
    cout << max({dp[n][k][0], dp[n][k][1], dp[n][k][2]});  
}
```
ì´ë ‡ê²Œ ê³ ì³ë´„. ê·¸ëŸ¬ê³  ë§ìŒ.

ê·¼ë° ì™œ ë§ëŠ”ì§€ ëª¨ë¥´ê² ìŒã…‹ã…‹ã…‹ã…‹ã…‹

ì¼ë‹¨ ì € $i\ne j$ ì €ê±° ë„£ìœ¼ë‹ˆê¹Œ ì™œ ë§ì§€....??????? ì°¸ê³ í•œ ë¸”ë¡œê·¸ì—ì„œ ë„£ì€ ì½”ë“œë¼ ë˜‘ê°™ì´ ë„£ì–´ë´¤ëŠ”ë° ë§ìŒ
ê·¸ë¦¬ê³  ì´í•´ë¥¼ ìœ„í•´ì„œ ë‹«ì€ ë¬¸ ê°œìˆ˜ë³´ë‹¤ ë¼ì¸ì´ ì‘ìœ¼ë©´ continueí•˜ê²Œ ë§Œë“¤ì—ˆëŠ”ë° ë­”ê°€ ë””ë²„ê¹…í•œ ì‘ë™ì´ ë‚´ê°€ ìƒê°í•œ ê±°ë‘ ë‹¤ë¦„,,,,,, ë­ì§€...?
ë§ˆì§€ë§‰ìœ¼ë¡œ outofbounds ë– ì„œ dp ë°°ì—´ ì¸ë±ìŠ¤ë¥¼ í•œ ì¹¸ì”© ëŠ˜ë ¤ì¤¬ëŠ”ë° ê°‘ìê¸° ì—ëŸ¬ ì•ˆ ëœ¸...? ì™œ????

ì¢€ ë” ìƒê°í•´ë´ì•¼ê² ìŒ ë§ê¸´ ë§ì•˜ëŠ”ë°.... ì•„ë¬´íŠ¼ ë§ê¸´ í•¨!